{% extends "./base.html" %}

{% block app_content %}

<form class="form-inline my-2 my-lg-0" action="{{url_for('recherche_posts')}}" method="GET">
  <input type="search" name="keyword" class="form-control mr-sm-2" type="text" placeholder="Faire une recherche dans les messages">
  <button class="btn btn-primary mb-1" href="{{url_for('recherche_posts')}}" type="submit">Rechercher</button>
</form>

{% if resultats %}
<h1>{{resultats.total}} r√©sultats pour la recherche "{{ keyword }}" :</h1>
<ul>
    {% for resultat in resultats.items %}
    <li><b>{{ resultat.post_titre }}</b><br/>
        {% if resultat.html %}
        {{ resultat.html | safe }}
        {% else %}
        {{ resultat.post_message }}
        {% endif %}</li>
    {% endfor %}
</ul>
<nav aria-label="research-pagination">
    <ul class="pagination">
        {%- for page in resultats.iter_pages() %}
        {% if page %}
        {% if page != resultats.page %}
        <li class="page-item">
            <a class="page-link" href="{{ url_for('recherche_posts', keyword=keyword, page=page) }}">{{page}}</a>
        </li>
        {% else %}
        <li class="page-item active disabled">
            <a class="page-link">{{page}} <span class="sr-only">(actuelle)</span></a>
        </li>
        {% endif %}

        {% else %}
        <li class="page-item disabled">
            <a class="page-link">...</a>
        </li>
        {% endif %}

        {%- endfor %}
    </ul>
</nav>
{% endif %}
{% endblock %}